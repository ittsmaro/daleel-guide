<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูุฏููู ุงูุชูุงุนูู: ุฏููู ุงูุทุงูุจ ูููู ุงููุทุงูุจ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    
    <!-- Chosen Palette: Islamic Heritage (Warm Neutrals & Deep Green) -->
    <!-- Application Structure Plan: 
         1. Hero Section: Brief intro to the book and its status in the Madhhab.
         2. Analytic Dashboard (Chart.js): Visualizing the "Complexity vs. Focus" of different commentaries to help students choose.
         3. Interactive Editions Library: A filterable grid to compare physical prints (Tahqiq) based on features.
         4. Explanations Explorer: A tabbed interface separating Classical vs. Contemporary explanations with audio/text indicators.
         5. The "Advisor" Tool: A simple logic-based form to recommend a specific path based on the student's level.
         Why this structure? Students often get overwhelmed by choices. This structure separates the "Text" (Matn) from the "Commentary" (Sharh) and uses data viz to make abstract differences concrete.
    -->

    <!-- Visualization & Content Choices:
         1. Scatter Plot (Chart.js): Maps commentaries on X (Conciseness -> Detail) and Y (Focus on Wording -> Focus on Evidence). Goal: Compare.
         2. Filterable Cards: For Editions. Goal: Inform & Organize.
         3. Dynamic Accordions: For details of each book. Goal: Inform without clutter.
         4. Recommendation Engine (JS): Goal: Guide/Engage.
         5. NO SVG/Mermaid used. Unicode icons and CSS shapes used instead.
    -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'heritage-dark': '#3E2723', // Dark Brown
                        'heritage-gold': '#BCAAA4', // Muted Gold/Beige
                        'heritage-green': '#2E7D32', // Islamic Green
                        'heritage-paper': '#F9F7F2', // Old Paper
                        'heritage-accent': '#C62828', // Red Ink
                    },
                    fontFamily: {
                        'sans': ['Tajawal', 'sans-serif'],
                        'serif': ['Amiri', 'serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #F9F7F2;
            color: #3E2723;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 500px;
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(62, 39, 35, 0.1);
        }
        .tab-active {
            border-bottom: 3px solid #2E7D32;
            color: #2E7D32;
            font-weight: 700;
        }
        .tab-inactive {
            color: #8D6E63;
        }
    </style>
</head>
<body class="font-sans antialiased min-h-screen flex flex-col">

    <!-- Header Section -->
    <header class="bg-heritage-dark text-white shadow-lg relative overflow-hidden">
        <div class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/arabesque.png')]"></div>
        <div class="container mx-auto px-6 py-10 relative z-10 text-center">
            <h1 class="text-4xl md:text-6xl font-serif font-bold mb-4 text-heritage-gold">ุฏููู ุงูุทุงูุจ ูููู ุงููุทุงูุจ</h1>
            <p class="text-xl md:text-2xl font-light text-gray-300 mb-6">ุงููุฑุฌุน ุงูุชูุงุนูู ุงูุดุงูู ูููุชูู ูุงูุดุฑูุญ ูุงููุณุฎ ุงููุนุชูุฏุฉ</p>
            <div class="flex justify-center gap-4 flex-wrap">
                <span class="bg-heritage-green px-4 py-1 rounded-full text-sm">ุงูููู ุงูุญูุจูู</span>
                <span class="bg-heritage-green px-4 py-1 rounded-full text-sm">ูุฑุนู ุงููุฑูู</span>
                <span class="bg-heritage-green px-4 py-1 rounded-full text-sm">ุงููุชูู ุงููุนุชูุฏุฉ</span>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-white shadow sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-center md:justify-start overflow-x-auto whitespace-nowrap py-3 gap-6 text-lg">
                <button onclick="switchSection('overview')" id="nav-overview" class="tab-active hover:text-heritage-green transition">ูุธุฑุฉ ุนุงูุฉ</button>
                <button onclick="switchSection('editions')" id="nav-editions" class="tab-inactive hover:text-heritage-green transition">ุฃูุถู ุงูุทุจุนุงุช</button>
                <button onclick="switchSection('explanations')" id="nav-explanations" class="tab-inactive hover:text-heritage-green transition">ุฎุฑูุทุฉ ุงูุดุฑูุญ</button>
                <button onclick="switchSection('advisor')" id="nav-advisor" class="tab-inactive hover:text-heritage-green transition">ุงููุณุชุดุงุฑ ุงูุฐูู</button>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <main class="container mx-auto px-4 py-8 flex-grow">

        <!-- SECTION: OVERVIEW & CHART -->
        <section id="overview" class="block animate-fade-in">
            <div class="grid grid-cols-1 md:grid-cols-12 gap-8">
                <!-- Text Content -->
                <div class="md:col-span-4 bg-white p-6 rounded-xl shadow-sm border-t-4 border-heritage-green">
                    <h2 class="text-2xl font-serif font-bold mb-4 text-heritage-dark">ุนู ุงููุชุงุจ</h2>
                    <p class="mb-4 leading-relaxed text-gray-700">
                        ูุชุงุจ <strong>"ุฏููู ุงูุทุงูุจ ูููู ุงููุทุงูุจ"</strong> ููุนูุงูุฉ ูุฑุนู ุจู ููุณู ุงููุฑูู (ุช 1033ูู) ูู ุฃุญุฏ ุฃูู ุงููุชูู ุงููุนุชูุฏุฉ ุนูุฏ ุงููุชุฃุฎุฑูู ูู ุงูุญูุงุจูุฉ.
                    </p>
                    <p class="mb-4 leading-relaxed text-gray-700">
                        ูุชููุฒ ุจุญุณู ุงูุชูุณููุ ููุถูุญ ุงูุนุจุงุฑุฉุ ูุงูุงูุชุตุงุฑ ุนูู ุงูููู ุงูุฑุงุฌุญ ูู ุงููุฐูุจ ุฏูู ุชุดููุด ุจุฐูุฑ ุงูุฎูุงูุ ููุง ุฌุนูู ูุญุท ุฃูุธุงุฑ ุงูุนููุงุก ูุงูุทูุงุจ ููุญูุธ ูุงูุฏุฑุงุณุฉ.
                    </p>
                    <div class="bg-heritage-paper p-4 rounded-lg border border-heritage-gold mt-6">
                        <h3 class="font-bold text-heritage-dark mb-2">๐ฏ ููุงูุชู ูู ุงูุณูู ุงูุชุนูููู</h3>
                        <p class="text-sm">ูุฃุชู ุนุงุฏุฉ ุจุนุฏ "ุฃุฎุตุฑ ุงููุฎุชุตุฑุงุช" ููุจู "ุงูุฑูุถ ุงููุฑุจุน" ุฃู "ุฒุงุฏ ุงููุณุชููุน". ููุงุณุจ ูููุจุชุฏุฆ ุงูุฌุงุฏ ูุงููุชูุณุท.</p>
                    </div>
                </div>

                <!-- Visualization -->
                <div class="md:col-span-8 bg-white p-6 rounded-xl shadow-sm">
                    <div class="mb-4">
                        <h2 class="text-2xl font-serif font-bold text-heritage-dark">ุฎุฑูุทุฉ ุงูุดุฑูุญ ุงูุชุญููููุฉ</h2>
                        <p class="text-gray-500 text-sm">ููุงุฑูุฉ ุจูู ุงูุดุฑูุญ ุจูุงุกู ุนูู "ุนูู ุงูุทุฑุญ" ู "ุงูุชุฑููุฒ ุนูู ุงูุฏููู"</p>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="commentaryChart"></canvas>
                    </div>
                    <div class="mt-4 text-center text-xs text-gray-500">
                        ุงุถุบุท ุนูู ุงูููุงุท ูู ุงูุฑุณู ุงูุจูุงูู ูุฑุคูุฉ ุงูุชูุงุตูู
                    </div>
                </div>
            </div>

            <!-- Stats Row -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-8">
                <div class="bg-white p-4 rounded-lg text-center shadow-sm">
                    <div class="text-3xl font-bold text-heritage-green">400+</div>
                    <div class="text-gray-600 text-sm">ุนุงู ูู ุงูุงุนุชูุงุฏ</div>
                </div>
                <div class="bg-white p-4 rounded-lg text-center shadow-sm">
                    <div class="text-3xl font-bold text-heritage-green">10+</div>
                    <div class="text-gray-600 text-sm">ุดุฑูุญ ูุทุจูุนุฉ</div>
                </div>
                <div class="bg-white p-4 rounded-lg text-center shadow-sm">
                    <div class="text-3xl font-bold text-heritage-green">3</div>
                    <div class="text-gray-600 text-sm">ุทุจุนุงุช ูุญููุฉ ูุจุฑู</div>
                </div>
                <div class="bg-white p-4 rounded-lg text-center shadow-sm">
                    <div class="text-3xl font-bold text-heritage-green">โ</div>
                    <div class="text-gray-600 text-sm">ุฃุฌุฑ ูุจุฑูุฉ ููุนูู</div>
                </div>
            </div>
        </section>

        <!-- SECTION: EDITIONS (NUSAKH) -->
        <section id="editions" class="hidden animate-fade-in">
            <div class="mb-8 bg-white p-6 rounded-xl border-r-4 border-heritage-accent">
                <h2 class="text-3xl font-serif font-bold text-heritage-dark mb-2">ุฃูุถู ุงูุทุจุนุงุช (ุงููุณุฎ)</h2>
                <p class="text-gray-600">ุงุฎุชูุงุฑ ุงููุณุฎุฉ ุงูุตุญูุญุฉ ูู ูุตู ุงูุทุฑูู. ุงููุณุฎ ุงููููุฆุฉ ุจุงูุฃุฎุทุงุก ุชุดูุด ุงูููู. ููุง ุงุณุชุนุฑุงุถ ูุฃูู ุงูุชุญูููุงุช ุงููุชููุฑุฉ.</p>
            </div>

            <!-- Controls -->
            <div class="flex gap-2 mb-6 overflow-x-auto pb-2">
                <button onclick="filterEditions('all')" class="px-4 py-2 bg-heritage-dark text-white rounded-lg hover:bg-opacity-90">ุงููู</button>
                <button onclick="filterEditions('student')" class="px-4 py-2 bg-white text-heritage-dark border border-heritage-dark rounded-lg hover:bg-gray-50">ููุทุงูุจ (ูุฎุฏููุฉ)</button>
                <button onclick="filterEditions('academic')" class="px-4 py-2 bg-white text-heritage-dark border border-heritage-dark rounded-lg hover:bg-gray-50">ููุชุญููู (ุฃูุงุฏูููุฉ)</button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="editions-grid">
                <!-- Content injected via JS -->
            </div>
        </section>

        <!-- SECTION: EXPLANATIONS (SHURUH) -->
        <section id="explanations" class="hidden animate-fade-in">
            <div class="mb-8 bg-white p-6 rounded-xl border-r-4 border-heritage-green">
                <h2 class="text-3xl font-serif font-bold text-heritage-dark mb-2">ุฏููู ุงูุดุฑูุญ</h2>
                <p class="text-gray-600">ูููุณู ุงูุดุฑุงุญ ุฅูู ูุณููู: ุดุฑุงุญ ุงููุชู ุงูุฃุตูููู (ุงูุญูุงุจูุฉ ุงููุฏุงูู) ูุงูุดุฑุงุญ ุงููุนุงุตุฑูู (ุงููุณููุนุฉ ูุงูููุชูุจุฉ).</p>
            </div>

            <div class="flex flex-col md:flex-row gap-6">
                <!-- Sidebar Filters -->
                <div class="md:w-1/4 space-y-2">
                    <div class="bg-white p-4 rounded-lg shadow-sm">
                        <h3 class="font-bold text-lg mb-4 text-heritage-dark">ุชุตููู ุงูุดุฑุญ</h3>
                        <label class="flex items-center space-x-2 space-x-reverse cursor-pointer mb-2">
                            <input type="radio" name="shuruh-type" value="all" checked onclick="filterShuruh()" class="text-heritage-green focus:ring-heritage-green">
                            <span>ุงููู</span>
                        </label>
                        <label class="flex items-center space-x-2 space-x-reverse cursor-pointer mb-2">
                            <input type="radio" name="shuruh-type" value="classic" onclick="filterShuruh()" class="text-heritage-green focus:ring-heritage-green">
                            <span>ุดุฑูุญ ุชุฑุงุซูุฉ (ูุฏููุฉ)</span>
                        </label>
                        <label class="flex items-center space-x-2 space-x-reverse cursor-pointer mb-2">
                            <input type="radio" name="shuruh-type" value="contemporary" onclick="filterShuruh()" class="text-heritage-green focus:ring-heritage-green">
                            <span>ุดุฑูุญ ูุนุงุตุฑุฉ</span>
                        </label>
                        <label class="flex items-center space-x-2 space-x-reverse cursor-pointer">
                            <input type="radio" name="shuruh-type" value="audio" onclick="filterShuruh()" class="text-heritage-green focus:ring-heritage-green">
                            <span>ุดุฑูุญ ุตูุชูุฉ ูููุฒุฉ</span>
                        </label>
                    </div>
                </div>

                <!-- Results List -->
                <div class="md:w-3/4 space-y-4" id="shuruh-list">
                    <!-- Content injected via JS -->
                </div>
            </div>
        </section>

        <!-- SECTION: ADVISOR -->
        <section id="advisor" class="hidden animate-fade-in">
            <div class="max-w-2xl mx-auto bg-white p-8 rounded-2xl shadow-lg border-t-8 border-heritage-dark">
                <h2 class="text-3xl font-serif font-bold text-center text-heritage-dark mb-6">ุงููุณุชุดุงุฑ ุงูุฐูู ๐ก</h2>
                <p class="text-center text-gray-600 mb-8">ุฃุฌุจ ุนู ุงูุฃุณุฆูุฉ ุงูุชุงููุฉ ูููุชุฑุญ ุนููู ุงูุฎุทุฉ ุงูุฃูุณุจ ูุฏุฑุงุณุฉ ุงููุชุงุจ.</p>

                <div id="advisor-form">
                    <div class="mb-6">
                        <label class="block text-lg font-medium mb-3">ูุง ูู ูุณุชูุงู ุงูุญุงููุ</label>
                        <select id="user-level" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-heritage-green outline-none">
                            <option value="beginner">ูุจุชุฏุฆ (ุฃูู ูุชู ูููู ูู)</option>
                            <option value="intermediate">ูุชูุณุท (ุฏุฑุณุช ุฃุฎุตุฑ ุงููุฎุชุตุฑุงุช ุฃู ูุญูู)</option>
                            <option value="advanced">ูุชูุฏู (ุฃุฑูุฏ ุงููุฑุงุฌุนุฉ ูุงูุชุฏููู)</option>
                        </select>
                    </div>

                    <div class="mb-6">
                        <label class="block text-lg font-medium mb-3">ูุง ูู ูุฏูู ุงูุฑุฆูุณูุ</label>
                        <select id="user-goal" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-heritage-green outline-none">
                            <option value="understanding">ููู ุงููุณุงุฆู ูุชุตููุฑูุง (ูู ุงูุนุจุงุฑุฉ)</option>
                            <option value="evidence">ูุนุฑูุฉ ุงูุฏููู ูุงูุชุนููู</option>
                            <option value="memorization">ุงูุญูุธ ูุถุจุท ุงููุชู</option>
                        </select>
                    </div>

                    <button onclick="getRecommendation()" class="w-full bg-heritage-green text-white font-bold py-4 rounded-lg hover:bg-opacity-90 transition transform hover:scale-[1.02]">
                        ุงุญุตู ุนูู ุงูุชูุตูุฉ
                    </button>
                </div>

                <div id="advisor-result" class="hidden mt-8 bg-heritage-paper p-6 rounded-xl border border-dashed border-heritage-dark">
                    <h3 class="text-xl font-bold text-heritage-dark mb-2">ุงูุชูุตูุฉ ุงูููุชุฑุญุฉ:</h3>
                    <div id="recommendation-content" class="text-gray-800 space-y-3"></div>
                    <button onclick="resetAdvisor()" class="mt-4 text-sm text-gray-500 underline">ุฅุนุงุฏุฉ ุงููุญุงููุฉ</button>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-heritage-dark text-heritage-gold py-6 mt-8">
        <div class="container mx-auto px-4 text-center">
            <p class="font-serif text-lg">"ูู ูุฑุฏ ุงููู ุจู ุฎูุฑุงู ููููู ูู ุงูุฏูู"</p>
            <p class="text-sm mt-2 opacity-70">ุชู ุชุตููู ูุฐุง ุงูุฏููู ูุชุณููู ุทูุจ ุงูุนูู - ุฌููุน ุงูุญููู ูุญููุธุฉ ูุทูุงุจ ุงูุนูู</p>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA DATASETS ---

        const editionsData = [
            {
                id: 1,
                title: "ุทุจุนุฉ ูุธุฑ ุงููุฑูุงุจู",
                publisher: "ุฏุงุฑ ุทูุจุฉ",
                tags: ["student", "academic"],
                features: ["ุฏูุฉ ุถุจุท ุงููุต", "ุนูุงูุฉ ูุงุฆูุฉ ุจุงูุชุดููู", "ููุงูุด ูููุฏุฉ ูููุฑูู"],
                verdict: "ุชุนุชุจุฑ ุนูุฏ ุงููุซูุฑูู ุฃุฌูุฏ ุงูุทุจุนุงุช ูุฃุตุญูุง ูุตุงู.",
                color: "green"
            },
            {
                id: 2,
                title: "ุทุจุนุฉ ุณูุทุงู ุงูุนูุฏ",
                publisher: "ุฏุงุฑ ุฑูุงุฆุฒ",
                tags: ["student"],
                features: ["ุฅุฎุฑุงุฌ ููู ุฑุงุฆุน", "ูุดุฌุฑุฉ ููุจูุจุฉ", "ุฃููุงู ูุณุงุนุฏุฉ ููุญูุธ"],
                verdict: "ุงูุฃูุถู ููู ูุฑูุฏ ุงูุญูุธุ ูุฑูุญุฉ ุฌุฏุงู ููุนูู.",
                color: "blue"
            },
            {
                id: 3,
                title: "ุทุจุนุฉ ุนุจุฏุงูุณูุงู ุงูุดููุนุฑ",
                publisher: "ุฏุงุฑ ุฑูุงุฆุฒ (ุงููุชู)",
                tags: ["student", "academic"],
                features: ["ุชุญููู ุนููู ุฑุตูู", "ููุงุจูุฉ ุนูู ูุณุฎ ุฎุทูุฉ ูููุณุฉ"],
                verdict: "ุทุจุนุฉ ุนูููุฉ ูุญููุฉ ูุนุชูุฏ ุนูููุง.",
                color: "heritage"
            },
            {
                id: 4,
                title: "ุทุจุนุฉ ุงูููุชุจ ุงูุฅุณูุงูู",
                publisher: "ุงูููุชุจ ุงูุฅุณูุงูู",
                tags: ["classic"],
                features: ["ูุฏููุฉ ููุชุฏุงููุฉ", "ุฑุฎูุตุฉ ุงูุซูู"],
                verdict: "ุฌูุฏุฉ ูููู ุงููุณุฎ ุงูุฌุฏูุฏุฉ ูุงูุชูุง ูู ุงูุฎุฏูุฉ ูุงูุถุจุท.",
                color: "gray"
            }
        ];

        const shuruhData = [
            {
                id: 1,
                title: "ููู ุงููุขุฑุจ ุจุดุฑุญ ุฏููู ุงูุทุงูุจ",
                author: "ุงูุชุบูุจู (ุชูููุฐ ุงููุคูู)",
                type: "classic",
                desc: "ุงูุดุฑุญ ุงููุนุชูุฏ ุงูุฐู ูุญู ุฃููุงุธ ุงููุชู ุจุฏูุฉ ุฏูู ุงุณุชุทุฑุงุฏ.",
                level: "ูุชูุณุท"
            },
            {
                id: 2,
                title: "ููุงุฑ ุงูุณุจูู",
                author: "ุงุจู ุถููุงู",
                type: "classic",
                desc: "ุฃุดูุฑ ุงูุดุฑูุญ ุงููุชุฃุฎุฑุฉุ ูุชููุฒ ุจุฐูุฑ ุงูุฏููู ูุชุฎุฑูุฌ ุงูุฃุญุงุฏูุซ.",
                level: "ูุชูุฏู"
            },
            {
                id: 3,
                title: "ุงููุนุชูุฏ ูู ููู ุงูุฅูุงู ุฃุญูุฏ",
                author: "ุนูู ุงูููุฏู",
                type: "classic",
                desc: "ุญุงุดูุฉ ูุดุฑุญ ูููุฏ ุฌุฏุงู ูุฌูุน ุดูุงุฑุฏ ุงููุฐูุจ.",
                level: "ูุชูุฏู"
            },
            {
                id: 4,
                title: "ุงูุดุฑุญ ุงูููุชุน (ุดุฑุญ ุตูุชู ููุฑุบ)",
                author: "ุงูุดูุฎ ูุญูุฏ ุจู ุนุซูููู",
                type: "contemporary",
                desc: "ุนูู ููุงุฑ ุงูุณุจููุ ููู ูุฏุฑุณุฉ ููููุฉ ูุชูุงููุฉ ูู ุงูุชุนููู ูุงูุชุฑุฌูุญ.",
                level: "ูุชูุฏู"
            },
            {
                id: 5,
                title: "ุดุฑุญ ุงูุดูุฎ ุฃุญูุฏ ุงููุนููู",
                author: "ุงูุดูุฎ ุฃุญูุฏ ุงููุนููู",
                type: "audio",
                desc: "ุดุฑุญ ุชุญูููู ุฏููู ุฌุฏุงู ููู ููุธุฉุ ููุชุงุฒ ููุชุฃุณูุณ ุงููุชูู.",
                level: "ูุจุชุฏุฆ/ูุชูุณุท"
            },
            {
                id: 6,
                title: "ุดุฑุญ ุงูุดูุฎ ูุทูู ุงูุฌุงุณุฑ",
                author: "ุงูุดูุฎ ูุทูู ุงูุฌุงุณุฑ",
                type: "audio",
                desc: "ุดุฑุญ ูุงุถุญ ูุณูุณุ ูุฑูุฒ ุนูู ุชุตููุฑ ุงููุณุงุฆู.",
                level: "ูุจุชุฏุฆ"
            },
            {
                id: 7,
                title: "ุดุฑุญ ุงูุดูุฎ ูุญูุฏ ุจุงุฌุงุจุฑ",
                author: "ุงูุดูุฎ ูุญูุฏ ุจุงุฌุงุจุฑ",
                type: "audio",
                desc: "ุดุฑุญ ุชุฃุตููู ูุนุชูู ุจุงููุฐูุจ ูุงูุฑูุงูุงุช.",
                level: "ูุชูุฏู"
            }
        ];

        // --- NAVIGATION LOGIC ---
        function switchSection(sectionId) {
            // Hide all sections
            ['overview', 'editions', 'explanations', 'advisor'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
                document.getElementById(`nav-${id}`).classList.remove('tab-active');
                document.getElementById(`nav-${id}`).classList.add('tab-inactive');
            });

            // Show selected
            document.getElementById(sectionId).classList.remove('hidden');
            document.getElementById(`nav-${sectionId}`).classList.add('tab-active');
            document.getElementById(`nav-${sectionId}`).classList.remove('tab-inactive');

            // Trigger animations or specific logic if needed
            if (sectionId === 'overview' && chartInstance) {
                // Resize chart if needed
            }
        }

        // --- EDITIONS RENDER LOGIC ---
        function renderEditions(filter = 'all') {
            const container = document.getElementById('editions-grid');
            container.innerHTML = '';

            const filtered = editionsData.filter(item => filter === 'all' || item.tags.includes(filter));

            filtered.forEach(item => {
                const card = document.createElement('div');
                card.className = `bg-white rounded-xl shadow-md overflow-hidden card-hover border-t-4 border-${item.color === 'green' ? 'heritage-green' : item.color === 'blue' ? 'blue-600' : 'heritage-dark'}`;
                card.innerHTML = `
                    <div class="p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-1">${item.title}</h3>
                        <p class="text-sm text-gray-500 mb-4">${item.publisher}</p>
                        <div class="space-y-2 mb-4">
                            ${item.features.map(f => `<div class="flex items-center text-sm text-gray-700"><span class="ml-2 text-heritage-green">โ</span>${f}</div>`).join('')}
                        </div>
                        <div class="bg-gray-50 p-3 rounded text-sm italic text-gray-600 border-r-2 border-heritage-gold">
                            "${item.verdict}"
                        </div>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function filterEditions(type) {
            renderEditions(type);
        }

        // --- SHURUH RENDER LOGIC ---
        function renderShuruh(filter = 'all') {
            const container = document.getElementById('shuruh-list');
            container.innerHTML = '';

            const filtered = shuruhData.filter(item => filter === 'all' || item.type === filter || (filter === 'contemporary' && item.type === 'audio'));

            filtered.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = "flex flex-col md:flex-row bg-white p-4 rounded-lg shadow-sm hover:bg-gray-50 transition border-r-4 " + (item.type === 'classic' ? 'border-heritage-dark' : 'border-heritage-accent');
                
                let icon = item.type === 'audio' ? '๐ง' : '๐';
                let typeLabel = item.type === 'classic' ? 'ุชุฑุงุซู' : item.type === 'audio' ? 'ุตูุชู' : 'ูุนุงุตุฑ';

                itemDiv.innerHTML = `
                    <div class="md:w-1/6 flex flex-col justify-center items-center text-3xl mb-3 md:mb-0 text-heritage-dark opacity-80">
                        ${icon}
                        <span class="text-xs font-sans font-bold mt-1">${typeLabel}</span>
                    </div>
                    <div class="md:w-5/6">
                        <div class="flex justify-between items-start">
                            <h4 class="text-lg font-bold text-gray-800">${item.title}</h4>
                            <span class="bg-gray-100 text-xs px-2 py-1 rounded text-gray-600">${item.level}</span>
                        </div>
                        <p class="text-sm text-heritage-dark font-medium mb-1">${item.author}</p>
                        <p class="text-sm text-gray-600">${item.desc}</p>
                    </div>
                `;
                container.appendChild(itemDiv);
            });
        }

        function filterShuruh() {
            const selected = document.querySelector('input[name="shuruh-type"]:checked').value;
            renderShuruh(selected);
        }

        // --- ADVISOR LOGIC ---
        function getRecommendation() {
            const level = document.getElementById('user-level').value;
            const goal = document.getElementById('user-goal').value;
            const resultDiv = document.getElementById('advisor-result');
            const contentDiv = document.getElementById('recommendation-content');
            
            let recText = "";
            let editionRec = "";
            let explanationRec = "";

            // Logic Tree
            if (level === 'beginner') {
                editionRec = "ููุตุญู ุจุทุจุนุฉ <b>ุณูุทุงู ุงูุนูุฏ (ุฏุงุฑ ุฑูุงุฆุฒ)</b> ูุฃููุง ูุดุฌุฑุฉ ูููููุฉ ูุชุณุงุนุฏ ุนูู ุงูุชุตูุฑ ูุงูุญูุธ.";
                explanationRec = "ุงุจุฏุฃ ุจุณูุงุน ุดุฑุญ <b>ุงูุดูุฎ ูุทูู ุงูุฌุงุณุฑ</b> ูุณูููุชูุ ุฃู ุดุฑุญ <b>ุงูุดูุฎ ุฃุญูุฏ ุงููุนููู</b> ุฅุฐุง ููุช ุชุญุจ ุงูุฏูุฉ ูุงูุชูุตูู ูู ุงูุจุฏุงูุฉ.";
            } else if (level === 'intermediate') {
                editionRec = "ุทุจุนุฉ <b>ูุธุฑ ุงููุฑูุงุจู</b> ูู ุงูุฃูุณุจ ูู ูุฏูุฉ ุถุจุทูุง.";
                if (goal === 'evidence') {
                    explanationRec = "ุนููู ุจูุชุงุจ <b>ููุงุฑ ุงูุณุจูู</b> ูุงุจู ุถููุงูุ ููู ูุฑูุฒ ุจุดุฏุฉ ุนูู ุงูุฃุฏูุฉ.";
                } else {
                    explanationRec = "ุทุงูุน <b>ููู ุงููุขุฑุจ</b> ููู ุงูุนุจุงุฑุฉุ ูุงุณุชูุน ูุดุฑุญ <b>ุงูุดูุฎ ูุญูุฏ ุจุงุฌุงุจุฑ</b> ููุชุฃุตูู.";
                }
            } else { // Advanced
                editionRec = "ููุถู ุงูุชูุงุก <b>ุทุจุนุฉ ุงููุจุฏู (ุงูููุชุจุฉ ุงูุฅุณูุงููุฉ)</b> ูุนูููุง ุญุงุดูุฉ ุงููุจุฏู ูููุงุฆุณูุง.";
                explanationRec = "ุฏุฑุงุณุฉ <b>ุญุงุดูุฉ ุงููุจุฏู</b> ู <b>ุงููุนุชูุฏ</b>ุ ูููุงุฑูุชูุง ุจูุง ูู <b>ูุดุงู ุงูููุงุน</b>.";
            }

            contentDiv.innerHTML = `
                <div class="mb-2">๐ <strong>ุงููุณุฎุฉ:</strong> ${editionRec}</div>
                <div>๐๏ธ <strong>ุงูุดุฑุญ:</strong> ${explanationRec}</div>
            `;
            
            document.getElementById('advisor-form').classList.add('hidden');
            resultDiv.classList.remove('hidden');
        }

        function resetAdvisor() {
            document.getElementById('advisor-form').classList.remove('hidden');
            document.getElementById('advisor-result').classList.add('hidden');
        }

        // --- CHART.JS INITIALIZATION ---
        let chartInstance = null;

        document.addEventListener('DOMContentLoaded', function() {
            // Init content
            renderEditions();
            renderShuruh();

            // Init Chart
            const ctx = document.getElementById('commentaryChart').getContext('2d');
            
            // Data points: x = Depth (Concise -> Detailed), y = Focus (Wording -> Evidence)
            // Center (0,0) is balanced
            const scatterData = [
                { x: -0.8, y: -0.5, r: 10, label: "ููู ุงููุขุฑุจ", type: "ูู ุนุจุงุฑุฉ" }, // Very concise, focuses on text
                { x: 0.5, y: 0.9, r: 15, label: "ููุงุฑ ุงูุณุจูู", type: "ุฃุฏูุฉ" }, // Moderate detail, heavy on evidence
                { x: 0.8, y: -0.2, r: 12, label: "ุญุงุดูุฉ ุงููุจุฏู", type: "ุชุฏููู ูููู" }, // High detail, focus on text logic
                { x: 0.9, y: 0.7, r: 20, label: "ุงูุดุฑุญ ุงูููุชุน", type: "ุชุนูููู ุดุงูู" }, // Very detailed, high evidence
                { x: -0.2, y: -0.2, r: 8, label: "ุงููุชู ุงูุฃุตูู", type: "ุงููุชู" }
            ];

            chartInstance = new Chart(ctx, {
                type: 'bubble',
                data: {
                    datasets: [{
                        label: 'ุงูุดุฑูุญ',
                        data: scatterData,
                        backgroundColor: function(context) {
                            const val = context.raw?.type;
                            if(val === 'ุงููุชู') return '#3E2723';
                            if(val === 'ุฃุฏูุฉ') return '#2E7D32';
                            return 'rgba(188, 170, 164, 0.8)';
                        },
                        borderColor: '#3E2723',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.raw.label + " (" + context.raw.type + ")";
                                }
                            },
                            bodyFont: { family: 'Tajawal' }
                        }
                    },
                    scales: {
                        x: {
                            title: { display: true, text: 'ุงูุฅูุฌุงุฒ  <---------->  ุงูุชูุตูู ูุงูุฅุทูุงุจ', font: { family: 'Tajawal' } },
                            min: -1, max: 1.5,
                            grid: { color: '#eee' }
                        },
                        y: {
                            title: { display: true, text: 'ุญู ุงูุฃููุงุธ  <---------->  ุฐูุฑ ุงูุฃุฏูุฉ ูุงูุชุนููู', font: { family: 'Tajawal' } },
                            min: -1, max: 1.5,
                            grid: { color: '#eee' }
                        }
                    }
                }
            });
        });

    </script>
</body>
</html>